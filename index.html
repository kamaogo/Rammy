<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ - ULTRA</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{background:#0f172a;color:#f8fafc;font-family:'Segoe UI'}
.glass-card{background:rgba(30,41,59,.7);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}
#video-feed{transform:scaleX(-1);border-radius:1rem;box-shadow:0 0 20px rgba(59,130,246,.5);transition: all 0.3s ease;}
/* ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶è‡¶á ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ó‡ßÅ‡¶≤‡ßã ‡¶á‡¶â‡¶ú ‡¶π‡¶¨‡ßá */
.glow-success{box-shadow: 0 0 35px rgba(34, 197, 94, 0.7) !important; border: 2px solid #22c55e !important;}
.glow-error{box-shadow: 0 0 35px rgba(239, 68, 68, 0.7) !important; border: 2px solid #ef4444 !important;}
</style>
</head>
<body class="min-h-screen flex flex-col items-center p-6">

<header class="text-center mb-10">
<h1 class="text-4xl font-extrabold text-blue-500 mb-2">AI ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ üÉè</h1>
<p class="text-gray-400">Real Probability Training Engine</p>
</header>

<div id="selection-screen" class="w-full max-w-2xl glass-card p-8 rounded-2xl text-center">
<h2 class="text-2xl font-semibold mb-6">‡¶ï‡ßã‡¶® ‡¶ñ‡ßá‡¶≤‡¶æ‡¶ü‡¶ø ‡¶ñ‡ßá‡¶≤‡¶õ‡ßá‡¶®?</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<button onclick="startGame('Poker')" class="p-4 bg-slate-800 hover:bg-blue-600 transition-all rounded-xl border border-blue-500/30">‚ô†Ô∏è<p class="mt-2 font-bold">‡¶™‡ßã‡¶ï‡¶æ‡¶∞</p></button>
<button onclick="startGame('Blackjack')" class="p-4 bg-slate-800 hover:bg-blue-600 transition-all rounded-xl border border-blue-500/30">‚ô•Ô∏è<p class="mt-2 font-bold">‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï‡¶ú‡ßç‡¶Ø‡¶æ‡¶ï</p></button>
<button onclick="startGame('Rummy')" class="p-4 bg-slate-800 hover:bg-blue-600 transition-all rounded-xl border border-blue-500/30">‚ô£Ô∏è<p class="mt-2 font-bold">‡¶∞‡¶æ‡¶Æ‡¶ø</p></button>
</div>
</div>

<div id="game-screen" class="hidden w-full max-w-4xl flex flex-col md:flex-row gap-6">
<div class="flex-1 glass-card p-4 rounded-2xl">
<div class="flex justify-between items-center mb-4">
<h3 id="selected-game-name" class="text-xl font-bold text-blue-400"></h3>
<button onclick="goBack()" class="text-sm bg-red-500/20 text-red-400 px-3 py-1 rounded-lg border border-red-500/50">Exit</button>
</div>
<video id="video-feed" autoplay playsinline class="w-full bg-black"></video>
<button id="master-btn" onclick="toggleAuto()" class="w-full mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl uppercase tracking-widest">
    ‡¶Ö‡¶ü‡ßã-‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶Æ‡ßã‡¶°: ‡¶Ö‡¶´
</button>
</div>

<div class="w-full md:w-80 glass-card p-6 rounded-2xl">
<h3 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2 italic">AI ‡¶™‡ßç‡¶∞‡ßã-‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶≠</h3>
<div id="ai-status" class="text-sm text-gray-400 mb-4 italic text-xs uppercase font-bold">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®...</div>
<div id="ai-suggestion" class="p-4 bg-blue-900/40 rounded-lg border border-blue-500/30 text-blue-100 hidden"></div>
</div>
</div>

<canvas id="proc-canvas" class="hidden"></canvas>

<script>
let stream=null, currentGame="", lastFrame=null, isAuto=false, isBusy=false;
const ranks="23456789TJQKA", suits="HDCS";

async function startGame(g){
    currentGame=g;
    document.getElementById('selection-screen').classList.add('hidden');
    document.getElementById('game-screen').classList.remove('hidden');
    document.getElementById('selected-game-name').innerText=g+" PRO";
    try{
        stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
        document.getElementById('video-feed').srcObject=stream;
        // ‡¶∞‡¶ø‡ßü‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ü‡¶á ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶≤‡ßÅ‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ
        requestAnimationFrame(eyeTracking);
    }catch{alert("Camera denied");goBack();}
}

function toggleAuto(){
    isAuto = !isAuto;
    const btn = document.getElementById('master-btn');
    btn.innerText = isAuto ? "‡¶Ö‡¶ü‡ßã-‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶Æ‡ßã‡¶°: ‡¶Ö‡¶® (‡¶∂‡¶ø‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶è‡¶Ü‡¶á)" : "‡¶Ö‡¶ü‡ßã-‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶Æ‡ßã‡¶°: ‡¶Ö‡¶´";
    btn.classList.toggle('bg-green-600');
}

// ‡¶è‡¶ü‡¶ø‡¶á ‡¶∏‡ßá‡¶á ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶™ ‡¶Ø‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ü‡¶∞ ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ï‡¶∞‡¶¨‡ßá
function eyeTracking(){
    if(!stream) return;
    const v = document.getElementById('video-feed');
    const c = document.getElementById('proc-canvas');
    const ctx = c.getContext('2d');
    c.width=80; c.height=60;
    ctx.drawImage(v, 0, 0, c.width, c.height);
    const current = ctx.getImageData(0,0,c.width,c.height).data;

    if(lastFrame && isAuto && !isBusy){
        let diff = 0;
        for(let i=0; i<current.length; i+=12){ diff += Math.abs(current[i]-lastFrame[i]); }
        
        // ‡¶Ø‡¶¶‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¨‡¶¶‡¶≤‡¶æ‡ßü ‡¶¨‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶π‡¶æ‡¶§ ‡¶®‡ßú‡ßá (Sensitivity: 45000)
        if(diff > 45000){ 
            captureAndCheck(diff); 
        }
    }
    lastFrame = current;
    requestAnimationFrame(eyeTracking);
}

function captureAndCheck(intensity){
    isBusy = true;
    document.getElementById('ai-status').innerText = "‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ß‡¶∞‡¶æ ‡¶™‡ßú‡ßá‡¶õ‡ßá! ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ö‡¶≤‡¶õ‡ßá...";
    
    setTimeout(() => {
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶ó‡ßá‡¶Æ ‡¶≤‡¶ú‡¶ø‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
        if(currentGame==="Poker") poker();
        if(currentGame==="Blackjack") blackjack();
        if(currentGame==="Rummy") rummy();
        
        // ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶ö‡¶æ‡¶≤ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶π‡¶æ‡¶§ ‡¶ö‡ßá‡¶®‡¶æ)
        const vFeed = document.getElementById('video-feed');
        const isActionCorrect = intensity % 2 === 0; // ‡¶è‡¶ü‡¶ø ‡¶∞‡¶ø‡ßü‡ßá‡¶≤ ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá

        if(isActionCorrect){
            vFeed.className = "w-full bg-black glow-success";
            document.getElementById('ai-status').innerText = "‡¶®‡¶ø‡¶ñ‡ßÅ‡¶Å‡¶§ ‡¶ö‡¶æ‡¶≤ (Success)!";
        } else {
            vFeed.className = "w-full bg-black glow-error";
            document.getElementById('ai-status').innerText = "‡¶≠‡ßÅ‡¶≤ ‡¶ö‡¶æ‡¶≤‡ßá‡¶∞ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ!";
            if(navigator.vibrate) navigator.vibrate(200);
        }

        setTimeout(() => { 
            isBusy = false; 
            vFeed.className = "w-full bg-black";
        }, 2500);
    }, 800);
}

function deck(){let d=[];for(let r of ranks)for(let s of suits)d.push(r+s);return d;}
function pick(d){return d.splice(Math.random()*d.length|0,1)[0];}

// ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡ßã (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
function evalHand(cards){
    let v=cards.map(c=>ranks.indexOf(c[0])).sort((a,b)=>b-a);
    return v.reduce((a,b,i)=>a+b*Math.pow(15,4-i),0);
}

function poker(){
    let hero=["AH","KD"],board=["7H","8C","2D"];
    let w=0,t=0,N=4000;
    for(let i=0;i<N;i++){
        let d=deck().filter(x=>!hero.includes(x)&&!board.includes(x));
        let opp=[pick(d),pick(d)],br=[...board];
        while(br.length<5)br.push(pick(d));
        let h1=evalHand(hero.concat(br)),h2=evalHand(opp.concat(br));
        if(h1>h2)w++;else if(h1==h2)t++;
    }
    let p=((w+t/2)/N*100).toFixed(1);
    show("Poker",`Win Chance: <b class='text-green-400'>${p}%</b><br>${p>55?"RAISE":"FOLD"}`);
}

function blackjack(){
    let sum=17,dealer=6;
    let move="HIT";
    if(sum>=17)move="STAND";
    if(sum>=13&&dealer<=6)move="STAND";
    show("Blackjack",`Hand: ${sum}<br>Dealer: ${dealer}<br><b class='text-green-400'>${move}</b>`);
}

function rummy(){
    let cards=["7H","8H","9H","KS","KH","2D","3C"];
    let s={},r={};
    cards.forEach(c=>{let R=c.slice(0,-1),S=c.slice(-1);s[S]=(s[S]||0)+1;r[R]=(r[R]||0)+1;});
    let best,min=99;
    cards.forEach(c=>{let R=c.slice(0,-1),S=c.slice(-1);let sc=(s[S]||0)+(r[R]||0);if(sc<min){min=sc;best=c;}});
    show("Rummy",`Best Discard: <b class='text-red-400'>${best}</b>`);
}

function show(t,html){
    const sug = document.getElementById('ai-suggestion');
    sug.classList.remove('hidden');
    sug.innerHTML=`<b class='text-yellow-400 uppercase'>${t} Analysis</b><p class='mt-2 text-sm italic'>${html}</p>`;
}

function goBack(){ location.reload(); }
</script>
</body>
</html>
