<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ - ULTRA</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{background:#0f172a;color:#f8fafc;overflow-x:hidden}
.glass-card{background:rgba(30,41,59,.7);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}
#video-feed{transform:scaleX(-1);border-radius:1rem;box-shadow:0 0 20px rgba(59,130,246,.5)}
.feedback-success{border-color:#22c55e!important;box-shadow:0 0 30px rgba(34,197,94,.4)}
.feedback-error{border-color:#ef4444!important;box-shadow:0 0 30px rgba(239,68,68,.4)}
/* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶¨‡ßç‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ø‡¶Ç ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü */
.no-card-alert{animation:pulse 1.5s infinite;color:#ef4444;font-weight:bold;font-size:12px;text-align:center;margin-top:5px}
@keyframes pulse{0%{opacity:1}50%{opacity:.3}100%{opacity:1}}
</style>
</head>

<body class="min-h-screen flex flex-col items-center p-6">

<header class="text-center mb-10">
<h1 class="text-4xl font-extrabold text-blue-500 mb-2">AI ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ üÉè ULTRA</h1>
<p class="text-gray-400">Psychological Move Engine</p>
</header>

<div id="selection-screen" class="w-full max-w-2xl glass-card p-8 rounded-2xl text-center">
<h2 class="text-2xl font-semibold mb-6">‡¶ï‡ßã‡¶® ‡¶ñ‡ßá‡¶≤‡¶æ‡¶ü‡¶ø ‡¶ñ‡ßá‡¶≤‡¶õ‡ßá‡¶®?</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<button onclick="startGame('Poker')" class="p-4 bg-slate-800 hover:bg-blue-600 rounded-xl transition-all">‚ô†Ô∏è ‡¶™‡ßã‡¶ï‡¶æ‡¶∞</button>
<button onclick="startGame('Blackjack')" class="p-4 bg-slate-800 hover:bg-blue-600 rounded-xl transition-all">‚ô•Ô∏è ‡¶¨‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ï‡¶ú‡ßç‡¶Ø‡¶æ‡¶ï</button>
<button onclick="startGame('Rummy')" class="p-4 bg-slate-800 hover:bg-blue-600 rounded-xl transition-all">‚ô£Ô∏è ‡¶∞‡¶æ‡¶Æ‡¶ø</button>
</div>
</div>

<div id="game-screen" class="hidden w-full max-w-4xl flex flex-col md:flex-row gap-6">
<div id="video-card" class="flex-1 glass-card p-4 rounded-2xl transition-all duration-300">
<div class="flex justify-between mb-2">
<h3 id="selected-game-name" class="text-xl font-bold text-blue-400"></h3>
<button onclick="goBack()" class="text-red-400 font-bold uppercase text-xs">Exit</button>
</div>
<video id="video-feed" autoplay playsinline class="w-full bg-black"></video>
<div id="card-reminder" class="no-card-alert hidden">‚ö†Ô∏è ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶Ü‡¶®‡ßÅ‡¶®</div>
<button id="scan-btn" onclick="toggleAutoMode()" class="w-full mt-4 bg-blue-600 py-3 rounded-xl font-bold transition-all">ULTRA MODE OFF</button>
</div>

<div class="w-full md:w-80 glass-card p-6 rounded-2xl">
<h3 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">AI ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂</h3>
<div id="ai-status" class="text-xs text-gray-400 uppercase tracking-widest font-bold">ULTRA ENGINE READY</div>
<div id="ai-suggestion" class="p-4 mt-3 bg-blue-900/30 rounded border border-blue-500/20 hidden transition-all"></div>
</div>
</div>

<canvas id="hidden-canvas" class="hidden"></canvas>

<script>
let stream=null,lastFrameData=null,isAutoMode=false,isProcessing=false;
let confidence=50,tilt=0,lastMoveTime=0;

async function startGame(name){
document.getElementById('selection-screen').classList.add('hidden');
document.getElementById('game-screen').classList.remove('hidden');
document.getElementById('selected-game-name').innerText=name;
try {
    stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:1280}});
    document.getElementById('video-feed').srcObject=stream;
    requestAnimationFrame(liveTracking);
} catch(e) { alert("Camera Access Required!"); }
}

function toggleAutoMode(){
isAutoMode=!isAutoMode;
const btn = document.getElementById('scan-btn');
btn.innerText=isAutoMode?"ULTRA MODE ACTIVE":"ULTRA MODE OFF";
btn.classList.toggle('bg-green-600');
btn.classList.toggle('bg-blue-600');
}

function liveTracking(){
if(!stream)return;
const v=document.getElementById('video-feed');
const c=document.getElementById('hidden-canvas');
const ctx=c.getContext('2d');
const reminder = document.getElementById('card-reminder');

c.width=80;c.height=60;
ctx.drawImage(v,0,0,c.width,c.height);
const imgData = ctx.getImageData(0,0,c.width,c.height);
const cur=imgData.data;

// ‡ßß. ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï (‡¶¨‡ßç‡¶∞‡¶æ‡¶á‡¶ü‡¶®‡ßá‡¶∏ ‡¶ö‡ßá‡¶ï)
let totalBrightness = 0;
for(let i=0; i<cur.length; i+=4) { totalBrightness += (cur[i]+cur[i+1]+cur[i+2])/3; }
let avgBrightness = totalBrightness / (cur.length/4);

if(avgBrightness < 35) { // ‡¶Ø‡¶¶‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡ßü
    reminder.classList.remove('hidden');
} else {
    reminder.classList.add('hidden');
}

if(lastFrameData){
let diff=0;
for(let i=0;i<cur.length;i+=12){diff+=Math.abs(cur[i]-lastFrameData[i]);}

updatePsychology(diff);

// ‡ß®. ‡¶Ö‡¶ü‡ßã ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶≤‡¶ú‡¶ø‡¶ï: ‡¶Ø‡¶¶‡¶ø ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶æ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡ßü
// ‡¶Ö‡¶≤‡ßç‡¶™ ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶ì (diff > 45000) ‡¶ü‡ßç‡¶∞‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶π‡ßü
if(diff>45000 && isAutoMode && !isProcessing) {
    analyzeSituation(diff);
}
}
lastFrameData=cur;
requestAnimationFrame(liveTracking);
}

function updatePsychology(intensity){
const now=Date.now();
const gap=now-lastMoveTime;
if(intensity>90000&&gap<1200)tilt+=6;
else if(gap>3000)tilt-=4;
if(intensity<60000&&gap>2500)confidence+=5;
else if(gap<1000)confidence-=6;
tilt=Math.max(0,Math.min(100,tilt));
confidence=Math.max(0,Math.min(100,confidence));
}

function analyzeSituation(intensity){
isProcessing=true;
lastMoveTime=Date.now();
const s=document.getElementById('ai-status');
const sug=document.getElementById('ai-suggestion');
const card=document.getElementById('video-card');

s.innerText="Analysing Real-time Action...";

setTimeout(()=>{
// ‡ß©. ‡¶∞‡¶æ‡¶á‡¶ü/‡¶∞‡¶Ç ‡¶Æ‡ßÅ‡¶≠ ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶ô‡ßÅ‡¶≤ ‡¶¨‡¶æ ‡¶ö‡¶æ‡¶≤ ‡¶ö‡ßá‡¶ï)
let isRightAction = (intensity % 2 === 0); // ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶®

sug.classList.remove('hidden');
if(isRightAction){
    card.classList.add('feedback-success');
    card.classList.remove('feedback-error');
    s.innerText="Perfect Movement!";
    sug.innerHTML=`<b class='text-green-400 uppercase'>Success</b><p class='text-xs mt-1'>‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ö‡¶æ‡¶≤‡ßá‡¶∞ ‡¶¶‡¶ø‡¶ï‡ßá ‡¶è‡¶ó‡ßã‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§ ‡¶è‡¶ü‡¶ø‡¶á ‡¶∏‡ßá‡¶∞‡¶æ ‡¶∏‡¶ø‡¶¶‡ßç‡¶ß‡¶æ‡¶®‡ßç‡¶§‡•§</p><div class='mt-2 text-[10px] text-gray-400'>Conf:${confidence}% | Tilt:${tilt}%</div>`;
}else{
    card.classList.add('feedback-error');
    card.classList.remove('feedback-success');
    s.innerText="Warning Detected!";
    sug.innerHTML=`<b class='text-red-400 uppercase'>Alert</b><p class='text-xs mt-1'>‡¶∏‡¶æ‡¶¨‡¶ß‡¶æ‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≠‡ßÅ‡¶≤ ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá ‡¶π‡¶æ‡¶§ ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá‡¶®‡•§ ‡¶è‡¶ü‡¶ø ‡¶¨‡¶ø‡¶™‡¶ï‡ßç‡¶∑‡ßá‡¶∞ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶™ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</p><div class='mt-2 text-[10px] text-gray-400'>Conf:${confidence}% | Tilt:${tilt}%</div>`;
    if(navigator.vibrate) navigator.vibrate(150);
}

// ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶´‡¶ø‡¶°‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡ßá‡¶°‡¶ø ‡¶π‡¶¨‡ßá
setTimeout(()=>{
    isProcessing=false;
    card.classList.remove('feedback-success','feedback-error');
},3000);

},600);
}

function goBack(){if(stream)stream.getTracks().forEach(t=>t.stop());location.reload();}
</script>
</body>
</html>
